(()=>{"use strict";const t=document.getElementById("resources"),e=document.getElementById("building");function n(t){document.getElementById(t.name).childNodes[1].textContent=t.count}class c{constructor(t,e){this.name=t,this.count=0,this.require=e}createButton(){(function(t){const n=document.createElement("button");return n.textContent=t,n.id=`${t}-button`,e.appendChild(n),n})(this.name).addEventListener("click",(()=>{(0==this.require.length||this.checkBuild())&&this.buildItem()}))}checkBuild(){let t=this.require.length;if(this.require.forEach((e=>{o.find((({name:t})=>t==e.name)).count>=e.count&&(t-=1)})),0==t)return this.require.forEach((t=>{const e=o.find((({name:e})=>e==t.name));e.count-=t.count,n(e)})),!0}buildItem(){const t=o.find((({name:t})=>t==this.name));t.count+=1,n(t)}}const o=[];function u(t,e){const n=new c(t,e);o.push(n),n.createButton()}class i extends c{constructor(t,e,n,c){super(t,e),this.produce=n,this.craftSpeed=c}producer(){this.count>0?(this.produce.forEach((t=>{let e=o.find((({name:e})=>e==t.name));e.checkBuild()&&e.buildItem()})),setTimeout((()=>{this.producer()}),1e3/this.count*this.craftSpeed)):setTimeout((()=>{this.producer()}),1e3)}}const r=function(t,e,n,c){const u=new i(t,e,n,c);o.push(u),u.createButton(),u.producer()};u("stone",[]),u("coal",[]),u("brick",[{name:"stone",count:1},{name:"coal",count:1}]),r("stone furnace",[{name:"stone",count:10}],[{name:"brick",count:1}],5),r("stone miner",[{name:"brick",count:1}],[{name:"stone",count:1}],5),r("coal miner",[{name:"brick",count:20}],[{name:"coal",count:1}],5),o.forEach((e=>{const n=document.createElement("div");n.setAttribute("id",e.name);const c=document.createElement("p"),o=document.createElement("p");n.appendChild(c),n.appendChild(o),c.textContent=e.name,o.textContent=e.count,t.appendChild(n)}))})();